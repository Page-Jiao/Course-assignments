# 体系结构第三次作业

+ 焦培淇 &nbsp; &nbsp; PB17151767

## 1

### a

当L1发生miss时，如果L2命中，则将L2中的块拷贝到L1中，如果被换出的L1块不在L2内时，可以存在L2内；如果L2也miss，则从更低级的存储中拷贝相应的块到L2和L1中，同时，如果被换出的L1块不在L2内时，也可以存在L2内。

### b

此时，如果L2命中，则会产生cache间的块互换；如果L2也miss，则仅从更低级的存储中拷贝块到L1，同时将L1替换的块存入L2。

### c

在包容性cache里面，如果L1被换出的块是脏块的话，他需要被写回到L2中，即使L2已经包含了这个块。对于不包容的cache并不需要做改变。

## 2

若DRAM完全停止，则其内部数据必须全部写入主存同时在再次启动时需要将主存数据在写入DRAM，此时花费的能量是:

(2\*8GB/64Bytes)*(2.56 &mu; J+0.5nJ)=687.32J

687.32J/(1.6*60)=7.16分钟

因此至少休眠7.16分钟才能获益。

## 3

### a

1. 在不使用该项技术时，L2从存储器填充一个块所需要的时间(120+16*3)=168个时钟周期；

2. 在使用该技术时，首先请求cpu所需的字，同时直接传递至L2读端口，此时的时间为120个时钟周期（即只需存储器的反应时间）

### b

它主要取决于L1，L2cache的miss在平均访存时间中占的比例和采用关键字优先和提前重启技术对于cache miss服务时间的减小量。如果采用这样的技术带来的cache miss服务时间的减小量和整个服务时间的大小大致相同，并且L1miss的花费在整个平均访存时间中的比重较大，那么这项技术对于L1 miss来说就比较重要。